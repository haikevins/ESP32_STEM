#include <Arduino.h>
#include <Adafruit_Sensor.h>
#include <DHT.h>
#include <DHT_U.h>

#define DHTTYPE DHT11   // Loại cảm biến
#define DHTPIN 32       // Chân DATA
#define CTRL_PIN 33     // Chân điều khiển nguồn

DHT dht(DHTPIN, DHTTYPE);

void setup() {
  Serial.begin(9600);

  pinMode(CTRL_PIN, OUTPUT);
  digitalWrite(CTRL_PIN, HIGH); // Cấp nguồn cho DHT11
  delay(2000); // Chờ cảm biến ổn định

  dht.begin();
}

void loop() {
  static unsigned long lastRead = 0;
  if (millis() - lastRead >= interval) {
    lastRead = millis();
    
    float h = dht.readHumidity();
    float t = dht.readTemperature();

    if (isnan(h) || isnan(t)) {
      Serial.println("Lỗi đọc dữ liệu từ DHT11!");
    } else {
      Serial.print("Nhiệt độ: ");
      Serial.print(t);
      Serial.print("°C  Độ ẩm: ");
      Serial.print(h);
      Serial.println("%");
    }
  }
}